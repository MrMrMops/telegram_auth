<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Telegram Login Test</title>
</head>
<body>
  <script>
    function onTelegramAuth(user) {
      console.log("Telegram user:", user);
      fetch("https://nikitaauthtest1.loca.lt/auth/telegram?" + new URLSearchParams(user))
        .then(res => res.json())
        .then(data => alert("JWT: " + data.access_token))
        .catch(err => alert("Ошибка: " + err));
    }
  </script>

  <!-- Исправленные параметры -->
  <script 
    async
    src="https://telegram.org/js/telegram-widget.js?22"
    data-telegram-login="telllegr_bot"
    data-size="large"
    data-onauth="onTelegramAuth(user)"  
    data-request-access="write"          
  ></script>
</body>
</html>